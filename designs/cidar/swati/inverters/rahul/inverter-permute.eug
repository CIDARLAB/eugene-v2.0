//Properties
Property Name(txt);
Property ID(txt);
Property Sequence(txt);
Property Represses(txt);
Property RepressedBy(txt);
Property InducedBy(txt);
Property Description (txt);
Property Induces(txt);
Property Strength(num); /** num ==1 for strongest RBS; num ==5 for weakest RBS **/

Property Pigeon(txt);

//Part Types
PartType IndPr (Name, Sequence, InducedBy, Pigeon);
PartType RepPr (Name, Sequence, RepressedBy, Pigeon);
PartType ConstPr (Name, Sequence, Pigeon);
PartType RBS (Name, Sequence, Strength, Pigeon);
PartType Repressor (Name, Sequence, Represses, Pigeon);
PartType Reporter (Name, Sequence, Description, Pigeon);
PartType Inducer (Name, Sequence, Induces, Pigeon);
PartType Terminator (Name, Sequence, Pigeon);
PartType SmallMolecule (Name, Pigeon);


/* fusion sites
PartType FusionSite(Name, Sequence);
FusionSite A(.Name("A"), .Sequence("GGAG"));
FusionSite B(.Name("B"), .Sequence("TACT"));
FusionSite C(.Name("C"), .Sequence("AATG"));
FusionSite D(.Name("D"), .Sequence("AGGT"));
FusionSite E(.Name("E"), .Sequence("GCTT"));
FusionSite F(.Name("F"), .Sequence("CGCT"));
FusionSite G(.Name("G"), .Sequence("TGCC"));
FusionSite H(.Name("H"), .Sequence("GGAG"));
 */
 
/*** Constituitive Promoter ***/ 
ConstPr J23100(
	.Name("J23100"), 
	.Sequence("TTGACGGCTAGCTCAGTCCTAGGTACAGTGCTAGC"), 
	.Pigeon("p J23100"));
	
/*** Inducible Promoters ***/

// pLuxR
IndPr R0062(
	.Name("R0062"),
	.Sequence("acctgtaggatcgtacaggtttacgcaagaaaatggtttgttatagtcgaataaa"),
	.InducedBy("C0062"),
	.Pigeon("p R0062 3"));

/*** Repressible Promoters ***/ 	
RepPr R0040(
	.Name("R0040"), 
	.Sequence("TCCCTATCAGTGATAGAGATTGACATCCCTATCAGTGATAGAGATACTGAGCAC"),
	.RepressedBy("C0040"),
	.Pigeon("p R0040 5"));
RepPr R0051 (
	.Name("R0051"),
	.Sequence("taacaccgtgcgtgttgactattttacctctggcggtgataatggttgc"),
	.RepressedBy("C0051"),
	.Pigeon("p R0051 2"));

// pLacI
RepPr K091112 (
	.Name("K091112"),
	.Sequence("agcggcatgcatttacgttgacaccacctttcgcggtatggcatgatagcgcccgg"),
	.RepressedBy("C0012"),
	.Pigeon("p K091112 9"));

RepPr I13453 (
	.Name("I13453"),
	.Sequence("acattgattatttgcacggcgtcacactttgctatgccatagcatttttatccataagattagcggatcctacctgacgctttttatcgcaactctctactgtttctccataccgtttttttgggctagc"),
	.RepressedBy("C0080"),
	.Pigeon("p I13453 7"));	


/*** RBSs ***/	
RBS B0030m(.Name("B0030m"), 
	.Sequence("AGAGATTAAAGAGGAGAAATACTA"), 
	.Strength(2), 
	.Pigeon("r B0030m"));
RBS B0031m(
	.Name("B0031m"), 
	.Sequence("AGAGTCACACAGGAAACCT"), 
	.Strength(4), 
	.Pigeon("r B0031m"));
RBS B0032m(
	.Name("B0032m"), 
	.Sequence("AGAGTCACACAGGAAAGTACTA"), 
	.Strength(3), 
	.Pigeon("r B0032m"));
RBS B0033m(
	.Name("B0033m"), 
	.Sequence("AGAGTCACACAGGACTACTA"), 
	.Strength(5), 
	.Pigeon("r B0033m"));
RBS B0034m1(
	.Name("B0034m1"), 
	.Sequence("AGAGAAAGAGGAGAAATACTA"), 
	.Strength(1), 
	.Pigeon("r B0034m"));

/*** REPRESSORS ***/
Repressor C0040(
	.Name("C0040"), 
	.Sequence("ATGTCCAGATTAGATAAAAGTAAAGTGATTAACAGCGCATT
AGAGCTGCTTAATGAGGTCGGAATCGAAGGTTTAACAACCCGTAAACTCGCCCAGAAGCTAGGTGTAGAGCAGCCTA
CATTGTATTGGCATGTAAAAAATAAGCGGGCTTTGCTCGACGCCTTAGCCATTGAGATGTTAGATAGGCACCATACT
CACTTTTGCCCTTTAGAAGGGGAAAGCTGGCAAGATTTTTTACGTAATAACGCTAAAAGTTTTAGATGTGCTTTACT
AAGTCATCGCGATGGAGCAAAAGTACATTTAGGTACACGGCCTACAGAAAAACAGTATGAAACTCTCGAAAATCAAT
TAGCCTTTTTATGCCAACAAGGTTTTTCACTAGAGAATGCATTATATGCACTCAGCGCTGTGGGGCATTTTACTTTA
GGTTGCGTATTGGAAGATCAAGAGCATCAAGTCGCTAAAGAAGAAAGGGAAACACCTACTACTGATAGTATGCCGCC
ATTATTACGACAAGCTATCGAATTATTTGATCACCAAGGTGCAGAGCCAGCCTTCTTATTCGGCCTTGAATTGATCA
TATGCGGATTAGAAAAACAACTTAAATGTGAAAGTGGGTCCGCTGCAAACGACGAAAACTACGCTTTAGTAGCTTAA
TAACACTGATAGTGCTAGTGTAGATCAC"),
	.Represses("R0040"),
	.Pigeon("c C0040 5"));

Repressor C0012(
	.Name("C0012"), 
	.Sequence("ATGGTGAATGTGAAACCAGTAACGTTATACGATGTCGCAGAGTAT
GCCGGTGTCTCTTATCAGACCGTTTCCCGCGTGGTGAACCAGGCCAGCCACGTTTCTGCGAAAACGCGGGAAAAAGTGGAA
GCGGCGATGGCGGAGCTGAATTACATTCCCAACCGCGTGGCACAACAACTGGCGGGCAAACAGTCGTTGCTGATTGGCGTT
GCCACCTCCAGTCTGGCCCTGCACGCGCCGTCGCAAATTGTCGCGGCGATTAAATCTCGCGCCGATCAACTGGGTGCCAGC
GTGGTGGTGTCGATGGTAGAACGAAGCGGCGTCGAAGCCTGTAAAGCGGCGGTGCACAATCTTCTCGCGCAACGCGTCAGT
GGGCTGATCATTAACTATCCGCTGGATGACCAGGATGCCATTGCTGTGGAAGCTGCCTGCACTAATGTTCCGGCGTTATTT
CTTGATGTCTCTGACCAGACACCCATCAACAGTATTATTTTCTCCCATGAAGACGGTACGCGACTGGGCGTGGAGCATCTG
GTCGCATTGGGTCACCAGCAAATCGCGCTGTTAGCGGGCCCATTAAGTTCTGTCTCGGCGCGTCTGCGTCTGGCTGGCTGG
CATAAATATCTCACTCGCAATCAAATTCAGCCGATAGCGGAACGGGAAGGCGACTGGAGTGCCATGTCCGGTTTTCAACAA
ACCATGCAAATGCTGAATGAGGGCATCGTTCCCACTGCGATGCTGGTTGCCAACGATCAGATGGCGCTGGGCGCAATGCGC
GCCATTACCGAGTCCGGGCTGCGCGTTGGTGCGGATATCTCGGTAGTGGGATACGACGATACCGAAGACAGCTCATGTTAT
ATCCCGCCGTTAACCACCATCAAACAGGATTTTCGCCTGCTGGGGCAAACCAGCGTGGACCGCTTGCTGCAACTCTCTCAG
GGCCAGGCGGTGAAGGGCAATCAGCTGTTGCCCGTCTCACTGGTGAAAAGAAAAACCACCCTGGCGCCCAATACGCAAACC
GCCTCTCCCCGCGCGTTGGCCGATTCATTAATGCAGCTGGCACGACAGGTTTCCCGACTGGAAAGCGGGCAGGCTGCAAAC
GACGAAAACTACGCTTTAGTAGCTTAATAACTCTGATAGTGCTAGTGTAGATCTC"), 
	.Represses("K091112"),
	.Pigeon("c C0012 9"));

Repressor C0080(
	.Name("C0080"), 
	.Sequence("ATGGCTGAAGCGCAAAATGATCCCCTGCTGCCGGGATACTCGT
TTAACGCCCATCTGGTGGCGGGTTTAACGCCGATTGAGGCCAATGGTTATCTCGATTTTTTTATCGACCGACCGCTGGGA
ATGAAAGGTTATATTCTCAATCTCACCATTCGCGGTCAGGGGGTGGTGAAAAATCAGGGACGAGAATTTGTCTGCCGACC
GGGTGATATTTTGCTGTTCCCGCCAGGAGAGATTCATCACTACGGTCGTCATCCGGAGGCTCGCGAATGGTATCACCAGT
GGGTTTACTTTCGTCCGCGCGCCTACTGGCATGAATGGCTTAACTGGCCGTCAATATTTGCCAATACGGGTTTCTTTCGC
CCGGATGAAGCGCACCAGCCGCATTTCAGCGACCTGTTTGGGCAAATCATTAACGCCGGGCAAGGGGAAGGGCGCTATTC
GGAGCTGCTGGCGATAAATCTGCTTGAGCAATTGTTACTGCGGCGCATGGAAGCGATTAACGAGTCGCTCCATCCACCGA
TGGATAATCGGGTACGCGAGGCTTGTCAGTACATCAGCGATCACCTGGCAGACAGCAATTTTGATATCGCCAGCGTCGCA
CAGCATGTTTGCCTGTCGCCGTCGCGTCTGTCACATCTTTTCCGCCAGCAGTTAGGGATTAGCGTCTTAAGCTGGCGCGAG
GACCAACGCATCAGCCAGGCGAAGCTGCTTTTGAGCACTACCCGGATGCCTATCGCCACCGTCGGTCGCAATGTTGGTTTT
GACGATCAACTCTATTTCTCGCGAGTATTTAAAAAATGCACCGGGGCCAGCCCGAGCGAGTTCCGTGCCGGTTGTGAAGAA
AAAGTGAATGATGTAGCCGTCAAGTTGTCAGCTGCAAACGACGAAAACTACGCTTTAGTAGCTTAATAA"), 
	.Represses("I13453"),
	.Pigeon("c C0080 7"));

Repressor C0051(
	.Name("C0051"), 
	.Sequence("ATGAGCACAAAAAAGAAACCATTAACACAAGAGCAGCTTGA
GGACGCACGTCGCCTTAAAGCAATTTATGAAAAAAAGAAAAATGAACTTGGCTTATCCCAGGAATCTGTCGCAGACA
AGATGGGGATGGGGCAGTCAGGCGTTGGTGCTTTATTTAATGGCATCAATGCATTAAATGCTTATAACGCCGCATTG
CTTGCAAAAATTCTCAAAGTTAGCGTTGAAGAATTTAGCCCTTCAATCGCCAGAGAAATCTACGAGATGTATGAAGC
GGTTAGTATGCAGCCGTCACTTAGAAGTGAGTATGAGTACCCTGTTTTTTCTCATGTTCAGGCAGGGATGTTCTCAC
CTGAGCTTAGAACCTTTACCAAAGGTGATGCGGAGAGATGGGTAAGCACAACCAAAAAAGCCAGTGATTCTGCATTC
TGGCTTGAGGTTGAAGGTAATTCCATGACCGCACCAACAGGCTCCAAGCCAAGCTTTCCTGACGGAATGTTAATTCT
CGTTGACCCTGAGCAGGCTGTTGAGCCAGGTGATTTCTGCATAGCCAGACTTGGGGGTGATGAGTTTACCTTCAAGA
AACTGATCAGGGATAGCGGTCAGGTGTTTTTACAACCACTAAACCCACAGTACCCAATGATCCCATGCAATGAGAGT
TGTTCCGTTGTGGGGAAAGTTATCGCTAGTCAGTGGCCTGAAGAGACGTTTGGCGCTGCAAACGACGAAAACTACGC
TTTAGTAGCTTAATAACGCTGATAGTGCTAGTGTAGATCGC"),
	.Represses("R0051"),
	.Pigeon("c C0051 2"));


/*** INDUCERS ***/
Inducer C0062(
	.Name("C0062"), 
	.Sequence("atgaaaaacataaatgccgacgacacatacagaataattaata
aaattaaagcttgtagaagcaataatgatattaatcaatgcttatctgatatgactaaaatggtacattgtgaatat
tatttactcgcgatcatttatcctcattctatggttaaatctgatatttcaatcctagataattaccctaaaaaatg
gaggcaatattatgatgacgctaatttaataaaatatgatcctatagtagattattctaactccaatcattcaccaa
ttaattggaatatatttgaaaacaatgctgtaaataaaaaatctccaaatgtaattaaagaagcgaaaacatcaggt
cttatcactgggtttagtttccctattcatacggctaacaatggcttcggaatgcttagttttgcacattcagaaaa
agacaactatatagatagtttatttttacatgcgtgtatgaacataccattaattgttccttctctagttgataatt
atcgaaaaataaatatagcaaataataaatcaaacaacgatttaaccaaaagagaaaaagaatgtttagcgtgggca
tgcgaaggaaaaagctcttgggatatttcaaaaatattaggttgcagtgagcgtactgtcactttccatttaaccaa
tgcgcaaatgaaactcaatacaacaaaccgctgccaaagtatttctaaagcaattttaacaggagcaattgattgcc
catactttaaaaattaataa"),
	.Induces("R0062"));


/*** REPORTERS ***/
Reporter E1010m(
	.Name("E1010m"), 
	.Sequence("AATGATGGCTTCCTCCGAGGATGTTATCAAAGAGTTCATG
CGTTTCAAAGTTCGTATGGAAGGTTCCGTTAACGGTCACGAGTTCGAAATCGAAGGTGAAGGTGAAGGTCGTCCGTA
CGAAGGTACCCAGACCGCTAAACTGAAAGTTACCAAAGGTGGTCCGCTGCCGTTCGCTTGGGACATCCTGTCCCCGC
AGTTCCAGTACGGTTCCAAAGCTTACGTTAAACACCCGGCTGACATCCCGGACTACCTGAAACTGTCCTTCCCGGAA
GGTTTCAAATGGGAACGTGTTATGAACTTCGAAGATGGTGGTGTTGTTACCGTTACCCAGGACTCCTCCCTGCAAGA
CGGTGAGTTCATCTACAAAGTTAAACTGCGTGGTACCAACTTCCCGTCCGACGGTCCGGTTATGCAGAAAAAAACCA
TGGGTTGGGAAGCTTCCACCGAACGTATGTACCCGGAGGATGGTGCTCTGAAAGGTGAAATCAAAATGCGTCTGAAA
CTGAAAGACGGTGGTCACTACGACGCTGAAGTTAAAACCACCTACATGGCTAAAAAACCGGTTCAGCTGCCGGGTGC
TTACAAAACCGACATCAAACTGGACATCACCTCCCACAACGAGGACTACACCATCGTTGAACAGTACGAACGTGCTG
AAGGTCGTCACTCCACCGGTGCTTAATAA"),
	.Description("RFP"),
	.Pigeon("c E1010 6"));

Reporter E0040(
	.Name("E0040"), 
	.Sequence("ATGCGTAAAGGAGAAGAACTTTTCACTGGAGTTGTCCCAATT
CTTGTTGAATTAGATGGTGATGTTAATGGGCACAAATTTTCTGTCAGTGGAGAGGGTGAAGGTGATGCAACATACGG
AAAACTTACCCTTAAATTTATTTGCACTACTGGAAAACTACCTGTTCCATGGCCAACACTTGTCACTACTTTCGGTT
ATGGTGTTCAATGCTTTGCGAGATACCCAGATCATATGAAACAGCATGACTTTTTCAAGAGTGCCATGCCCGAAGGT
TATGTACAGGAAAGAACTATATTTTTCAAAGATGACGGGAACTACAAGACACGTGCTGAAGTCAAGTTTGAAGGTGA
TACCCTTGTTAATAGAATCGAGTTAAAAGGTATTGATTTTAAAGAAGATGGAAACATTCTTGGACACAAATTGGAAT
ACAACTATAACTCACACAATGTATACATCATGGCAGACAAACAAAAGAATGGAATCAAAGTTAACTTCAAAATTAGA
CACAACATTGAAGATGGAAGCGTTCAACTAGCAGACCATTATCAACAAAATACTCCAATTGGCGATGGCCCTGTCCT
TTTACCAGACAACCATTACCTGTCCACACAATCTGCCCTTTCGAAAGATCCCAACGAAAAGAGAGACCACATGGTCC
TTCTTGAGTTTGTAACAGCTGCTGGGATTACACATGGCATGGATGAACTATACAAATAATAA"),
	.Description("GFP"),
	.Pigeon("c E0040 4"));

/*** TERMINATORS ***/
Terminator B0015(
	.Name("B0015"), 
	.Sequence("CCAGGCATCAAATAAAACGAAAGGCTCAGTCGAAAGACTG
GGCCTTTCGTTTTATCTGTTGTTTGTCGGTGAACGCTCTCTACTAGAGTCACACTGGCTCACCTTCGGGTGGGCCTT
TCTGCGTTTATA"),
	.Pigeon("t B0015"));

/***
Terminator B0015x(
	.Name("B0015x"), 
	.Sequence("CCAGGCATCAAATAAAACGAAAGGCTCAGTCGAAAGACTG
GGCCTTTCGTTTTATCTGTTGTTTGTCGGTGAACGCTCTCTACTAGAGTCACACTGGCTCACCTTCGGGTGGGCCTT
TCTGCGTTTATA"),
	.Pigeon("t B0015x"));
***/

/** SPECIFICATION OF RELATIONSHIPS **/
C0040 REPRESSES R0040;
C0012 REPRESSES K091112;
C0080 REPRESSES I13453;
C0051 REPRESSES R0051;
C0062 INDUCES R0062;


//Intermediate Devices (Transcriptional Units)
Device TU1 (ConstPr, RBS, Repressor, Terminator);
Device TU2 (RepPr, RBS, Repressor, Terminator);
Device TU3 (RepPr, RBS, Reporter, Terminator);
Device TU4 (RepPr, RBS, Reporter, Terminator);

Device Inverter (TU1, TU2, TU3, TU4);

Device[] lstPermutations = permute(Inverter);

println(lstPermutations);


/***
// now, let's define some rules
Rule validInverter(
	ON Inverter:
// RULE 1: equal RBSs in TU2 and TU3			
		Inverter.TU2.RBS EQUALS Inverter.TU3.RBS

			AND
			
// RULE 2: the RBSs in TU2 and TU3 can either be B0030m or B0034m1			
		( Inverter.TU2.RBS EQUALS B0030m OR Inverter.TU2.RBS EQUALS B0034m1 )
		
			AND

// RULE 3: different Repressors
		
		Inverter.TU1.Repressor NOTEQUALS Inverter.TU2.Repressor
			
			AND
			
// RULE 4: different Reporters		
		E0040 WITH E1010m 

			AND
			
// RULE 5: GFP before RFP
		E0040 BEFORE E1010m

			AND			
			
// RULE 6: REPRESSION relationships
		Inverter.TU1.Repressor REPRESSES Inverter.TU2.RepPr
			AND
		Inverter.TU1.Repressor REPRESSES Inverter.TU3.RepPr
			AND
		Inverter.TU2.Repressor REPRESSES Inverter.TU4.RepPr
		
			AND
			
// Rule 7: order of the repressors
		C0040 BEFORE C0012
);

***/