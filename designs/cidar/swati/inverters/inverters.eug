//Properties
Property Name(txt);
Property ID(txt);
Property Sequence(txt);
Property Represses(txt);
Property RepressedBy(txt);
Property InducedBy(txt);
Property Description (txt);
Property Induces(txt);
Property Strength(num); /** num ==1 for strongest RBS; num ==5 for weakest RBS **/

Property LeftFusionSite(txt);
Property RightFusionSite(txt);

Property Pigeon(txt);

//Part Types
PartType IndPr (Name, Sequence, InducedBy, LeftFusionSite, RightFusionSite, Pigeon);
PartType RepPr (Name, Sequence, RepressedBy, LeftFusionSite, RightFusionSite, Pigeon);
PartType ConstPr (Name, Sequence, LeftFusionSite, RightFusionSite, Pigeon);
PartType RBS (Name, Sequence, Strength, LeftFusionSite, RightFusionSite, Pigeon);
PartType Repressor (Name, Sequence, Represses, LeftFusionSite, RightFusionSite, Pigeon);
PartType Reporter (Name, Sequence, Description, LeftFusionSite, RightFusionSite, Pigeon);
PartType Inducer (Name, Sequence, Induces, LeftFusionSite, RightFusionSite, Pigeon);
PartType Terminator (Name, Sequence, LeftFusionSite, RightFusionSite, Pigeon);
PartType SmallMolecule (Name, LeftFusionSite, RightFusionSite, Pigeon);

//Defining Design Space
PartType FusionSite(Name, Sequence);

/* fusion sites */
FusionSite A(.Name("A"), .Sequence("GGAG"));
FusionSite B(.Name("B"), .Sequence("TACT"));
FusionSite C(.Name("C"), .Sequence("AATG"));
FusionSite D(.Name("D"), .Sequence("AGGT"));
FusionSite E(.Name("E"), .Sequence("GCTT"));
FusionSite F(.Name("F"), .Sequence("CGCT"));
FusionSite G(.Name("G"), .Sequence("TGCC"));
FusionSite H(.Name("H"), .Sequence("GGAG"));

ConstPr J23100_AB(
	.Name("J23100"), 
	.LeftFusionSite("A"), 
	.Sequence("GGAGTTGACGGCTAGCTCAGTCCTAGGTACAGTGCTAGCTACT"), 
	.RightFusionSite("B"),
	.Pigeon("p J23100_AB"));
RepPr R0040_EB(
	.Name("R0040"), 
	.LeftFusionSite("E"), 
	.Sequence("GCTTTCCCTATCAGTGATAGAGATTGACATCCCTATCAGTGATAGAGATACTGAGCACTACT"),
	.RightFusionSite("B"), 
	.RepressedBy("C0040"),
	.Pigeon("p R0040_EB 5"));
RepPr R0040_FB(
	.Name("R0040"), 
	.LeftFusionSite("F"), 
	.Sequence("CGCTTCCCTATCAGTGATAGAGATTGACATCCCTATCAGTGATAGAGATACTGAGCACTACT"),
	.RightFusionSite("B"), 
	.RepressedBy("C0040"),
	.Pigeon("p R0040_FB 5")); 
RepPr R0051_GB (
	.Name("R0051"),
	.LeftFusionSite("G"), 
	.Sequence("TGCCtaacaccgtgcgtgttgactattttacctctggcggtgataatggttgcTACT"),
	.RightFusionSite("B"), 
	.RepressedBy("C0051"),
	.Pigeon("p R0051_GB 7"));

RBS B0030m_BC(.Name("B0030m"), 
	.LeftFusionSite("B"), 
	.Sequence("TACTAGAGATTAAAGAGGAGAAATACTAAATG"), 
	.Strength(2), 
	.RightFusionSite("C"),
	.Pigeon("r B0030m_BC"));
RBS B0031m_BC(
	.Name("B0031m"), 
	.LeftFusionSite("B"), 
	.Sequence("TACTAGAGTCACACAGGAAACCTACTAAATG"), 
	.Strength(4), 
	.RightFusionSite("C"),
	.Pigeon("r B0031m_BC"));
RBS B0032m_BC(
	.Name("B0032m"), 
	.LeftFusionSite("B"), 
	.Sequence("TACTAGAGTCACACAGGAAAGTACTAAATG"), 
	.Strength(3), 
	.RightFusionSite("C"),
	.Pigeon("r B0032m_BC"));
/**
RBS B0033m_BC(
	.Name("B0033m"), 
	.LeftFusionSite("B"), 
	.Sequence("TACTAGAGTCACACAGGACTACTAAATG"), 
	.Strength(5), 
	.RightFusionSite("C"),
	.Pigeon("r B0033m_BC"));
RBS B0034m1_BC(
	.Name("B0034m1"), 
	.LeftFusionSite("B"), 
	.Sequence("TACTAGAGAAAGAGGAGAAATACTAAATG"), 
	.Strength(1), 
	.RightFusionSite("C"),
	.Pigeon("r B0034m_BC"));
 **/
 
Repressor C0040_CD(
	.Name("C0040"), 
	.LeftFusionSite("C"), 
	.Sequence("AATGATGTCCAGATTAGATAAAAGTAAAGTGATTAACAGCGCATT
AGAGCTGCTTAATGAGGTCGGAATCGAAGGTTTAACAACCCGTAAACTCGCCCAGAAGCTAGGTGTAGAGCAGCCTA
CATTGTATTGGCATGTAAAAAATAAGCGGGCTTTGCTCGACGCCTTAGCCATTGAGATGTTAGATAGGCACCATACT
CACTTTTGCCCTTTAGAAGGGGAAAGCTGGCAAGATTTTTTACGTAATAACGCTAAAAGTTTTAGATGTGCTTTACT
AAGTCATCGCGATGGAGCAAAAGTACATTTAGGTACACGGCCTACAGAAAAACAGTATGAAACTCTCGAAAATCAAT
TAGCCTTTTTATGCCAACAAGGTTTTTCACTAGAGAATGCATTATATGCACTCAGCGCTGTGGGGCATTTTACTTTA
GGTTGCGTATTGGAAGATCAAGAGCATCAAGTCGCTAAAGAAGAAAGGGAAACACCTACTACTGATAGTATGCCGCC
ATTATTACGACAAGCTATCGAATTATTTGATCACCAAGGTGCAGAGCCAGCCTTCTTATTCGGCCTTGAATTGATCA
TATGCGGATTAGAAAAACAACTTAAATGTGAAAGTGGGTCCGCTGCAAACGACGAAAACTACGCTTTAGTAGCTTAA
TAACACTGATAGTGCTAGTGTAGATCACAGGT"),
	.RightFusionSite("D"), 
	.Represses("R0040"),
	.Pigeon("c C0040_CD 5"));
	
/**
Repressor C0012_CD(
	.Name("C0012"), 
	.LeftFusionSite("C"), 
	.Sequence("AATGATGGTGAATGTGAAACCAGTAACGTTATACGATGTCGCAGAGTAT
GCCGGTGTCTCTTATCAGACCGTTTCCCGCGTGGTGAACCAGGCCAGCCACGTTTCTGCGAAAACGCGGGAAAAAGTGGAA
GCGGCGATGGCGGAGCTGAATTACATTCCCAACCGCGTGGCACAACAACTGGCGGGCAAACAGTCGTTGCTGATTGGCGTT
GCCACCTCCAGTCTGGCCCTGCACGCGCCGTCGCAAATTGTCGCGGCGATTAAATCTCGCGCCGATCAACTGGGTGCCAGC
GTGGTGGTGTCGATGGTAGAACGAAGCGGCGTCGAAGCCTGTAAAGCGGCGGTGCACAATCTTCTCGCGCAACGCGTCAGT
GGGCTGATCATTAACTATCCGCTGGATGACCAGGATGCCATTGCTGTGGAAGCTGCCTGCACTAATGTTCCGGCGTTATTT
CTTGATGTCTCTGACCAGACACCCATCAACAGTATTATTTTCTCCCATGAAGACGGTACGCGACTGGGCGTGGAGCATCTG
GTCGCATTGGGTCACCAGCAAATCGCGCTGTTAGCGGGCCCATTAAGTTCTGTCTCGGCGCGTCTGCGTCTGGCTGGCTGG
CATAAATATCTCACTCGCAATCAAATTCAGCCGATAGCGGAACGGGAAGGCGACTGGAGTGCCATGTCCGGTTTTCAACAA
ACCATGCAAATGCTGAATGAGGGCATCGTTCCCACTGCGATGCTGGTTGCCAACGATCAGATGGCGCTGGGCGCAATGCGC
GCCATTACCGAGTCCGGGCTGCGCGTTGGTGCGGATATCTCGGTAGTGGGATACGACGATACCGAAGACAGCTCATGTTAT
ATCCCGCCGTTAACCACCATCAAACAGGATTTTCGCCTGCTGGGGCAAACCAGCGTGGACCGCTTGCTGCAACTCTCTCAG
GGCCAGGCGGTGAAGGGCAATCAGCTGTTGCCCGTCTCACTGGTGAAAAGAAAAACCACCCTGGCGCCCAATACGCAAACC
GCCTCTCCCCGCGCGTTGGCCGATTCATTAATGCAGCTGGCACGACAGGTTTCCCGACTGGAAAGCGGGCAGGCTGCAAAC
GACGAAAACTACGCTTTAGTAGCTTAATAACTCTGATAGTGCTAGTGTAGATCTCAGGT"), 
	.RightFusionSite("D"),
	.Represses("K091112"),
	.Pigeon("c C0012_CD 5"));

Repressor C0080_CD(
	.Name("C0080"), 
	.LeftFusionSite("C"), 
	.Sequence("AATGATGGCTGAAGCGCAAAATGATCCCCTGCTGCCGGGATACTCGT
TTAACGCCCATCTGGTGGCGGGTTTAACGCCGATTGAGGCCAATGGTTATCTCGATTTTTTTATCGACCGACCGCTGGGA
ATGAAAGGTTATATTCTCAATCTCACCATTCGCGGTCAGGGGGTGGTGAAAAATCAGGGACGAGAATTTGTCTGCCGACC
GGGTGATATTTTGCTGTTCCCGCCAGGAGAGATTCATCACTACGGTCGTCATCCGGAGGCTCGCGAATGGTATCACCAGT
GGGTTTACTTTCGTCCGCGCGCCTACTGGCATGAATGGCTTAACTGGCCGTCAATATTTGCCAATACGGGTTTCTTTCGC
CCGGATGAAGCGCACCAGCCGCATTTCAGCGACCTGTTTGGGCAAATCATTAACGCCGGGCAAGGGGAAGGGCGCTATTC
GGAGCTGCTGGCGATAAATCTGCTTGAGCAATTGTTACTGCGGCGCATGGAAGCGATTAACGAGTCGCTCCATCCACCGA
TGGATAATCGGGTACGCGAGGCTTGTCAGTACATCAGCGATCACCTGGCAGACAGCAATTTTGATATCGCCAGCGTCGCA
CAGCATGTTTGCCTGTCGCCGTCGCGTCTGTCACATCTTTTCCGCCAGCAGTTAGGGATTAGCGTCTTAAGCTGGCGCGAG
GACCAACGCATCAGCCAGGCGAAGCTGCTTTTGAGCACTACCCGGATGCCTATCGCCACCGTCGGTCGCAATGTTGGTTTT
GACGATCAACTCTATTTCTCGCGAGTATTTAAAAAATGCACCGGGGCCAGCCCGAGCGAGTTCCGTGCCGGTTGTGAAGAA
AAAGTGAATGATGTAGCCGTCAAGTTGTCAGCTGCAAACGACGAAAACTACGCTTTAGTAGCTTAATAAAGGT"), 
	.RightFusionSite("D"),
	.Represses("I13453"),
	.Pigeon("c C0080_CD 7"));
**/

Repressor C0051_CD(
	.Name("C0051"), 
	.LeftFusionSite("C"), 
	.Sequence("AATGATGAGCACAAAAAAGAAACCATTAACACAAGAGCAGCTTGA
GGACGCACGTCGCCTTAAAGCAATTTATGAAAAAAAGAAAAATGAACTTGGCTTATCCCAGGAATCTGTCGCAGACA
AGATGGGGATGGGGCAGTCAGGCGTTGGTGCTTTATTTAATGGCATCAATGCATTAAATGCTTATAACGCCGCATTG
CTTGCAAAAATTCTCAAAGTTAGCGTTGAAGAATTTAGCCCTTCAATCGCCAGAGAAATCTACGAGATGTATGAAGC
GGTTAGTATGCAGCCGTCACTTAGAAGTGAGTATGAGTACCCTGTTTTTTCTCATGTTCAGGCAGGGATGTTCTCAC
CTGAGCTTAGAACCTTTACCAAAGGTGATGCGGAGAGATGGGTAAGCACAACCAAAAAAGCCAGTGATTCTGCATTC
TGGCTTGAGGTTGAAGGTAATTCCATGACCGCACCAACAGGCTCCAAGCCAAGCTTTCCTGACGGAATGTTAATTCT
CGTTGACCCTGAGCAGGCTGTTGAGCCAGGTGATTTCTGCATAGCCAGACTTGGGGGTGATGAGTTTACCTTCAAGA
AACTGATCAGGGATAGCGGTCAGGTGTTTTTACAACCACTAAACCCACAGTACCCAATGATCCCATGCAATGAGAGT
TGTTCCGTTGTGGGGAAAGTTATCGCTAGTCAGTGGCCTGAAGAGACGTTTGGCGCTGCAAACGACGAAAACTACGC
TTTAGTAGCTTAATAACGCTGATAGTGCTAGTGTAGATCGCAGGT"),
	.RightFusionSite("D"), 
	.Represses("R0051"),
	.Pigeon("c C0051_CD 7"));

/*** 
Inducer C0062_CD(
	.Name("C0062"), 
	.LeftFusionSite("C"), 
	.Sequence("AATGatgaaaaacataaatgccgacgacacatacagaataattaata
aaattaaagcttgtagaagcaataatgatattaatcaatgcttatctgatatgactaaaatggtacattgtgaatat
tatttactcgcgatcatttatcctcattctatggttaaatctgatatttcaatcctagataattaccctaaaaaatg
gaggcaatattatgatgacgctaatttaataaaatatgatcctatagtagattattctaactccaatcattcaccaa
ttaattggaatatatttgaaaacaatgctgtaaataaaaaatctccaaatgtaattaaagaagcgaaaacatcaggt
cttatcactgggtttagtttccctattcatacggctaacaatggcttcggaatgcttagttttgcacattcagaaaa
agacaactatatagatagtttatttttacatgcgtgtatgaacataccattaattgttccttctctagttgataatt
atcgaaaaataaatatagcaaataataaatcaaacaacgatttaaccaaaagagaaaaagaatgtttagcgtgggca
tgcgaaggaaaaagctcttgggatatttcaaaaatattaggttgcagtgagcgtactgtcactttccatttaaccaa
tgcgcaaatgaaactcaatacaacaaaccgctgccaaagtatttctaaagcaattttaacaggagcaattgattgcc
catactttaaaaattaataaAGGT"),
	.RightFusionSite("D"), 
	.Induces("R0062"));
**/

Reporter E1010m_CD(
	.Name("E1010m"), 
	.LeftFusionSite("C"), 
	.Sequence("AATGAATGATGGCTTCCTCCGAGGATGTTATCAAAGAGTTCATG
CGTTTCAAAGTTCGTATGGAAGGTTCCGTTAACGGTCACGAGTTCGAAATCGAAGGTGAAGGTGAAGGTCGTCCGTA
CGAAGGTACCCAGACCGCTAAACTGAAAGTTACCAAAGGTGGTCCGCTGCCGTTCGCTTGGGACATCCTGTCCCCGC
AGTTCCAGTACGGTTCCAAAGCTTACGTTAAACACCCGGCTGACATCCCGGACTACCTGAAACTGTCCTTCCCGGAA
GGTTTCAAATGGGAACGTGTTATGAACTTCGAAGATGGTGGTGTTGTTACCGTTACCCAGGACTCCTCCCTGCAAGA
CGGTGAGTTCATCTACAAAGTTAAACTGCGTGGTACCAACTTCCCGTCCGACGGTCCGGTTATGCAGAAAAAAACCA
TGGGTTGGGAAGCTTCCACCGAACGTATGTACCCGGAGGATGGTGCTCTGAAAGGTGAAATCAAAATGCGTCTGAAA
CTGAAAGACGGTGGTCACTACGACGCTGAAGTTAAAACCACCTACATGGCTAAAAAACCGGTTCAGCTGCCGGGTGC
TTACAAAACCGACATCAAACTGGACATCACCTCCCACAACGAGGACTACACCATCGTTGAACAGTACGAACGTGCTG
AAGGTCGTCACTCCACCGGTGCTTAATAAAGGT"),
	.RightFusionSite("D"),  
	.Description("RFP"),
	.Pigeon("c E1010_CD 6"));

Reporter E0040_CD(
	.Name("E0040"), 
	.LeftFusionSite("C"),
	.Sequence("AATGATGCGTAAAGGAGAAGAACTTTTCACTGGAGTTGTCCCAATT
CTTGTTGAATTAGATGGTGATGTTAATGGGCACAAATTTTCTGTCAGTGGAGAGGGTGAAGGTGATGCAACATACGG
AAAACTTACCCTTAAATTTATTTGCACTACTGGAAAACTACCTGTTCCATGGCCAACACTTGTCACTACTTTCGGTT
ATGGTGTTCAATGCTTTGCGAGATACCCAGATCATATGAAACAGCATGACTTTTTCAAGAGTGCCATGCCCGAAGGT
TATGTACAGGAAAGAACTATATTTTTCAAAGATGACGGGAACTACAAGACACGTGCTGAAGTCAAGTTTGAAGGTGA
TACCCTTGTTAATAGAATCGAGTTAAAAGGTATTGATTTTAAAGAAGATGGAAACATTCTTGGACACAAATTGGAAT
ACAACTATAACTCACACAATGTATACATCATGGCAGACAAACAAAAGAATGGAATCAAAGTTAACTTCAAAATTAGA
CACAACATTGAAGATGGAAGCGTTCAACTAGCAGACCATTATCAACAAAATACTCCAATTGGCGATGGCCCTGTCCT
TTTACCAGACAACCATTACCTGTCCACACAATCTGCCCTTTCGAAAGATCCCAACGAAAAGAGAGACCACATGGTCC
TTCTTGAGTTTGTAACAGCTGCTGGGATTACACATGGCATGGATGAACTATACAAATAATAAAGGT"),
	.RightFusionSite("D"),  
	.Description("GFP"),
	.Pigeon("c E0040_CD 4"));

/** TERMINATORS **/

Terminator B0015_DE(
	.Name("B0015"), 
	.LeftFusionSite("D"),
	.Sequence("AGGTCCAGGCATCAAATAAAACGAAAGGCTCAGTCGAAAGACTG
GGCCTTTCGTTTTATCTGTTGTTTGTCGGTGAACGCTCTCTACTAGAGTCACACTGGCTCACCTTCGGGTGGGCCTT
TCTGCGTTTATAGCTT"),
	.RightFusionSite("E"),
	.Pigeon("t B0015_DE"));

Terminator B0015_DF(
	.Name("B0015"), 
	.LeftFusionSite("D"),
	.Sequence("AGGTCCAGGCATCAAATAAAACGAAAGGCTCAGTCGAAAGACTG
GGCCTTTCGTTTTATCTGTTGTTTGTCGGTGAACGCTCTCTACTAGAGTCACACTGGCTCACCTTCGGGTGGGCCTT
TCTGCGTTTATAACTA"),
	.RightFusionSite("F"),
	.Pigeon("t B0015_DF"));

Terminator B0015_DG(
	.Name("B0015"), 
	.LeftFusionSite("D"),
	.Sequence("AGGTCCAGGCATCAAATAAAACGAAAGGCTCAGTCGAAAGACTG
GGCCTTTCGTTTTATCTGTTGTTTGTCGGTGAACGCTCTCTACTAGAGTCACACTGGCTCACCTTCGGGTGGGCCTT
TCTGCGTTTATATGCC"),
	.RightFusionSite("G"),
	.Pigeon("t B0015_DG"));

Terminator B0015_DH(
	.Name("B0015"), 
	.LeftFusionSite("D"),
	.Sequence("AGGTCCAGGCATCAAATAAAACGAAAGGCTCAGTCGAAAGACTG
GGCCTTTCGTTTTATCTGTTGTTTGTCGGTGAACGCTCTCTACTAGAGTCACACTGGCTCACCTTCGGGTGGGCCTT
TCTGCGTTTATACGCT"),
	.RightFusionSite("H"),
	.Pigeon("t B0015_DH"));




//Intermediate Devices (Transcriptional Units)
Device Inv_TU1 (ConstPr, RBS, Repressor, Terminator); 
Device Inv_TU2 (RepPr, RBS, Repressor, Terminator);
Device Inv_TU3 (RepPr, RBS, Reporter, Terminator);
Device Inv_TU4 (RepPr, RBS, Reporter, Terminator);

Device TmpInverter = Inv_TU1 + Inv_TU2 + Inv_TU3 + Inv_TU4;
println(TmpInverter);
Rule rTmp (
	ON TmpInverter:
	 	/** Represses relationships **/
		TmpInverter[2].Represses EQUALS TmpInverter[4].Name AND
        TmpInverter[2].Represses EQUALS TmpInverter[8].Name AND
		TmpInverter[6].Represses EQUALS TmpInverter[12].Name 
		
		AND
		
		/** MoClo Format Rules **/
		TmpInverter[0].RightFusionSite EQUALS TmpInverter[1].LeftFusionSite AND
		TmpInverter[1].RightFusionSite EQUALS TmpInverter[2].LeftFusionSite AND
		TmpInverter[2].RightFusionSite EQUALS TmpInverter[3].LeftFusionSite AND
		TmpInverter[3].RightFusionSite EQUALS TmpInverter[4].LeftFusionSite AND
		TmpInverter[4].RightFusionSite EQUALS TmpInverter[5].LeftFusionSite AND
		TmpInverter[5].RightFusionSite EQUALS TmpInverter[6].LeftFusionSite AND
		TmpInverter[6].RightFusionSite EQUALS TmpInverter[7].LeftFusionSite AND
		TmpInverter[7].RightFusionSite EQUALS TmpInverter[8].LeftFusionSite AND
		TmpInverter[8].RightFusionSite EQUALS TmpInverter[9].LeftFusionSite AND
		TmpInverter[9].RightFusionSite EQUALS TmpInverter[10].LeftFusionSite AND
		TmpInverter[10].RightFusionSite EQUALS TmpInverter[11].LeftFusionSite AND
		TmpInverter[11].RightFusionSite EQUALS TmpInverter[12].LeftFusionSite AND
		TmpInverter[12].RightFusionSite EQUALS TmpInverter[13].LeftFusionSite AND
		TmpInverter[13].RightFusionSite EQUALS TmpInverter[14].LeftFusionSite AND
		TmpInverter[14].RightFusionSite EQUALS TmpInverter[15].LeftFusionSite 
		
		AND 
		
		// different/equal RBSs
		TmpInverter[1] NOTEQUALS TmpInverter[5] AND
		TmpInverter[5] EQUALS TmpInverter[9] 
		
		AND
		
		/** GFP AFTER RFP **/
		E0040_CD AFTER E1010m_CD
		
		AND
			/** RBS order **/
			//TmpInverter CONTAINS B0030m_BC AND TmpInverter CONTAINS B0031m_BC AND TmpInverter CONTAINS B0032m_BC
			//	AND
			B0030m_BC BEFORE B0031m_BC AND B0031m_BC BEFORE B0032m_BC
		
		AND
		
		/** different Reporters **/
		TmpInverter[10] NOTEQUALS TmpInverter[14] 
		
		AND 
		
		/** different Repressors **/
		TmpInverter[2] NOTEQUALS TmpInverter[6]
		
		AND
		
		/** different Terminators **/
		TmpInverter[3] NOTEQUALS TmpInverter[7] AND
		TmpInverter[7] NOTEQUALS TmpInverter[11]
);

// TODO: Missing Rule
//5. If TU[2] == Repressor then SmallMolecule is Rep_SmallMolecule AND Rep_SmallMolecule represses TU1.Repressor

function toPigeon(Device d) {
	for(num i=0; i<d.size(); i++) {
		println(d[i].Pigeon);		
	}
	println("# Arcs");
}

Device[] lst = product(TmpInverter, strict);
println(lst.size(), " inverters were generated...");
for(num k=0; k<lst.size(); k++) {
    //println(lst[k]);
    toPigeon(lst[k]);
}
//save(lst);  // save the generated inverters for further processing

