//Promoter Character Devices (PCDs)-DHD 
//Property
Property Name(txt);
Property Sequence(txt);
Property Description(txt);
Property Represses(txt); 

/*** MoClo Fusion Sites **/
Part Mo(Name, Sequence, Description);
Mo A(
	.Name("A"), .Sequence("TCTG"), .Description("A"));
Mo B(
	.Name("B"), .Sequence("TGAC"), .Description("B"));
Mo C(
	.Name("C"), .Sequence("AATG"), .Description("C"));
Mo D(
	.Name("D"), .Sequence("TTGC"), .Description("D"));
Mo E(
	.Name("E"), .Sequence("CCTG"), .Description("E"));
Mo F(
	.Name("F"), .Sequence("TTAC"), .Description("F"));
Mo G(
	.Name("G"), .Sequence("TGCC"), .Description("G"));

/****************/
/*** DEVICE 1 ***/
/****************/

/*** Parts for D1 ***/
//Promoter
Part Promoter(Name, Sequence, Description);
Promoter J23100_AB(
	.Name("J23100_AB"), .Sequence("GGAGTTGACGGCTAGCTCAGTCCTAGGTACAGTGCTAGCTACT"), .Description("J23100_AB"));
	
//RBS
Part RBS(Name, Sequence, Description);
RBS B0034_BC(
	.Name("B0034_BC"), .Sequence("TACTAAAGAGGAGAAAAATG"), .Description("B0034_BC"));
RBS BCD1_BC(
	.Name("BCD1_BC"), .Sequence("TACTGGGCCCAAGTTCACTTAAAAAGGAGATCAACAATGAAAGCAATTTTCGTACTGAAACATCTTAATCATGCACAGGAGACTTTCTAATG"), .Description("BCD1_BC"));
RBS BCD2_BC(
	.Name("BCD2_BC"), .Sequence("TACTGGGCCCAAGTTCACTTAAAAAGGAGATCAACAATGAAAGCAATTTTCGTACTGAAACATCTTAATCATGCTAAGGAGGTTTTCTAATGAATG"), .Description("BCD2_BC"));

//CDS
Part CDS(Name, Sequence, Description);
CDS RFP_CD(
	.Name("RFP_CD"), .Sequence("AATGATGGCTTCCTCCGAGGATGTTATCAAAGAGTTCATGCGTTTCAAAGTTCGTATGGAAGGTTCCGTTAACGGTCACGAGTTCGAAATCGAAGGTGAAGGTGAAGGTCGTCCGTACGAAGGTACCCAGACCGCTAAACTGAAAGTTACCAAAGGTGGTCCGCTGCCGTTCGCTTGGGACATCCTGTCCCCGCAGTTCCAGTACGGTTCCAAAGCTTACGTTAAACACCCGGCTGACATCCCGGACTACCTGAAACTGTCCTTCCCGGAAGGTTTCAAATGGGAACGTGTTATGAACTTCGAAGATGGTGGTGTTGTTACCGTTACCCAGGACTCCTCCCTGCAAGACGGTGAGTTCATCTACAAAGTTAAACTGCGTGGTACCAACTTCCCGTCCGACGGTCCGGTTATGCAGAAAAAAACCATGGGTTGGGAAGCTTCCACCGAACGTATGTACCCGGAGGATGGTGCTCTGAAAGGTGAAATCAAAATGCGTCTGAAACTGAAAGACGGTGGTCACTACGACGCTGAAGTTAAAACCACCTACATGGCTAAAAAACCGGTTCAGCTGCCGGGTGCTTACAAAACCGACATCAAACTGGACATCACCTCCCACAACGAGGACTACACCATCGTTGAACAGTACGAACGTGCTGAAGGTCGTCACTCCACCGGTGCTTAATAAAGGT"), .Description("E1010m_CD"));

//Terminator
Part Terminator(Name, Sequence, Description);
Terminator B0015_DE(
	.Name("B0015_DE"), .Sequence("AGGTCCAGGCATCAAATAAAACGAAAGGCTCAGTCGAAAGACTGGGCCTTTCGTTTTATCTGTTGTTTGTCGGTGAACGCTCTCTACTAGAGTCACACTGGCTCACCTTCGGGTGGGCCTTTCTGCGTTTATAGCTT"), .Description("B0015_DE"));

/*** DEVICE DECLARATION ***/
Device D1(Mo, Promoter, RBS, CDS, Terminator, Mo);

/*** RULES ***/
Rule D1_1(ON D1: A WITH E); 
Rule D1_3(ON D1: A BEFORE E);
Rule D1_4(ON D1: CONTAINS RFP_CD); 

/*** COMBINATORIAL FUNCTION **/
lstD1s = product(D1);

/*** VISUALIZE THE GENERATED D1 DEVICES ***/
//pigeon(lstD1s);
 

/****************/
/*** DEVICE 2 ***/
/****************/

//Additional Parts for D2
Promoter J23100_EB(
	.Name("J23100_EB"), 
	.Sequence("GCTTTTGACGGCTAGCTCAGTCCTAGGTACAGTGCTAGCTACT"), 
	.Description("J23100_EB"));

CDS araC_CD(
	.Name("araC_CD"), 
	.Sequence("AATGATGGCTGAAGCGCAAAATGATCCCCTGCTGCCGGGATACTCGTTTAACGCCCATCTGGTGGCGGGTTTAACGCCGATTGAGGCCAATGGTTATCTCGATTTTTTTATCGACCGACCGCTGGGAATGAAAGGTTATATTCTCAATCTCACCATTCGCGGTCAGGGGGTGGTGAAAAATCAGGGACGAGAATTTGTCTGCCGACCGGGTGATATTTTGCTGTTCCCGCCAGGAGAGATTCATCACTACGGTCGTCATCCGGAGGCTCGCGAATGGTATCACCAGTGGGTTTACTTTCGTCCGCGCGCCTACTGGCATGAATGGCTTAACTGGCCGTCAATATTTGCCAATACGGGTTTCTTTCGCCCGGATGAAGCGCACCAGCCGCATTTCAGCGACCTGTTTGGGCAAATCATTAACGCCGGGCAAGGGGAAGGGCGCTATTCGGAGCTGCTGGCGATAAATCTGCTTGAGCAATTGTTACTGCGGCGCATGGAAGCGATTAACGAGTCGCTCCATCCACCGATGGATAATCGGGTACGCGAGGCTTGTCAGTACATCAGCGATCACCTGGCAGACAGCAATTTTGATATCGCCAGCGTCGCACAGCATGTTTGCCTGTCGCCGTCGCGTCTGTCACATCTTTTCCGCCAGCAGTTAGGGATTAGCGTCTTAAGCTGGCGCGAGGACCAACGCATCAGCCAGGCGAAGCTGCTTTTGAGCACTACCCGGATGCCTATCGCCACCGTCGGTCGCAATGTTGGTTTTGACGATCAACTCTATTTCTCGCGAGTATTTAAAAAATGCACCGGGGCCAGCCCGAGCGAGTTCCGTGCCGGTTGTGAAGAAAAAGTGAATGATGTAGCCGTCAAGTTGTCAGCTGCAAACGACGAAAACTACGCTTTAGTAGCTTAATAAAGGT"), 
	.Description("C0080_CD"));
CDS LacI_CD(
	.Name("LacI_CD"), 
	.Sequence("AATGATGGTGAATGTGAAACCAGTAACGTTATACGATGTCGCAGAGTATGCCGGTGTCTCTTATCAGACCGTTTCCCGCGTGGTGAACCAGGCCAGCCACGTTTCTGCGAAAACGCGGGAAAAAGTGGAAGCGGCGATGGCGGAGCTGAATTACATTCCCAACCGCGTGGCACAACAACTGGCGGGCAAACAGTCGTTGCTGATTGGCGTTGCCACCTCCAGTCTGGCCCTGCACGCGCCGTCGCAAATTGTCGCGGCGATTAAATCTCGCGCCGATCAACTGGGTGCCAGCGTGGTGGTGTCGATGGTAGAACGAAGCGGCGTCGAAGCCTGTAAAGCGGCGGTGCACAATCTTCTCGCGCAACGCGTCAGTGGGCTGATCATTAACTATCCGCTGGATGACCAGGATGCCATTGCTGTGGAAGCTGCCTGCACTAATGTTCCGGCGTTATTTCTTGATGTCTCTGACCAGACACCCATCAACAGTATTATTTTCTCCCATGAAGACGGTACGCGACTGGGCGTGGAGCATCTGGTCGCATTGGGTCACCAGCAAATCGCGCTGTTAGCGGGCCCATTAAGTTCTGTCTCGGCGCGTCTGCGTCTGGCTGGCTGGCATAAATATCTCACTCGCAATCAAATTCAGCCGATAGCGGAACGGGAAGGCGACTGGAGTGCCATGTCCGGTTTTCAACAAACCATGCAAATGCTGAATGAGGGCATCGTTCCCACTGCGATGCTGGTTGCCAACGATCAGATGGCGCTGGGCGCAATGCGCGCCATTACCGAGTCCGGGCTGCGCGTTGGTGCGGATATCTCGGTAGTGGGATACGACGATACCGAAGACAGCTCATGTTATATCCCGCCGTTAACCACCATCAAACAGGATTTTCGCCTGCTGGGGCAAACCAGCGTGGACCGCTTGCTGCAACTCTCTCAGGGCCAGGCGGTGAAGGGCAATCAGCTGTTGCCCGTCTCACTGGTGAAAAGAAAAACCACCCTGGCGCCCAATACGCAAACCGCCTCTCCCCGCGCGTTGGCCGATTCATTAATGCAGCTGGCACGACAGGTTTCCCGACTGGAAAGCGGGCAGGCTGCAAACGACGAAAACTACGCTTTAGTAGCTTAATAAAGGT"), 
	.Description("C0012_CD"));
CDS LuxR_CD(
	.Name("LuxR_CD"), 
	.Sequence("AATGATGAAAAACATAAATGCCGACGACACATACAGAATAATTAATAAAATTAAAGCTTGTAGAAGCAATAATGATATTAATCAATGCTTATCTGATATGACTAAAATGGTACATTGTGAATATTATTTACTCGCGATCATTTATCCTCATTCTATGGTTAAATCTGATATTTCAATCCTAGATAATTACCCTAAAAAATGGAGGCAATATTATGATGACGCTAATTTAATAAAATATGATCCTATAGTAGATTATTCTAACTCCAATCATTCACCAATTAATTGGAATATATTTGAAAACAATGCTGTAAATAAAAAATCTCCAAATGTAATTAAAGAAGCGAAAACATCAGGTCTTATCACTGGGTTTAGTTTCCCTATTCATACGGCTAACAATGGCTTCGGAATGCTTAGTTTTGCACATTCAGAAAAAGACAACTATATAGATAGTTTATTTTTACATGCGTGTATGAACATACCATTAATTGTTCCTTCTCTAGTTGATAATTATCGAAAAATAAATATAGCAAATAATAAATCAAACAACGATTTAACCAAAAGAGAAAAAGAATGTTTAGCGTGGGCATGCGAAGGAAAAAGCTCTTGGGATATTTCAAAAATATTAGGTTGCAGTGAGCGTACTGTCACTTTCCATTTAACCAATGCGCAAATGAAACTCAATACAACAAACCGCTGCCAAAGTATTTCTAAAGCAATTTTAACAGGAGCAATTGATTGCCCATACTTTAAAAATTAATAAAGGT"), 
	.Description("C0062_CD"));
CDS TetR_CD(
	.Name("TetR_CD"), 
	.Sequence("AATGATGTCCAGATTAGATAAAAGTAAAGTGATTAACAGCGCATTAGAGCTGCTTAATGAGGTCGGAATCGAAGGTTTAACAACCCGTAAACTCGCCCAGAAGCTAGGTGTAGAGCAGCCTACATTGTATTGGCATGTAAAAAATAAGCGGGCTTTGCTCGACGCCTTAGCCATTGAGATGTTAGATAGGCACCATACTCACTTTTGCCCTTTAGAAGGGGAAAGCTGGCAAGATTTTTTACGTAATAACGCTAAAAGTTTTAGATGTGCTTTACTAAGTCATCGCGATGGAGCAAAAGTACATTTAGGTACACGGCCTACAGAAAAACAGTATGAAACTCTCGAAAATCAATTAGCCTTTTTATGCCAACAAGGTTTTTCACTAGAGAATGCATTATATGCACTCAGCGCTGTGGGGCATTTTACTTTAGGTTGCGTATTGGAAGATCAAGAGCATCAAGTCGCTAAAGAAGAAAGGGAAACACCTACTACTGATAGTATGCCGCCATTATTACGACAAGCTATCGAATTATTTGATCACCAAGGTGCAGAGCCAGCCTTCTTATTCGGCCTTGAATTGATCATATGCGGATTAGAAAAACAACTTAAATGTGAAAGTGGGTCCGCTGCAAACGACGAAAACTACGCTTTAGTAGCTTAATAAAGGT"), 
	.Description("C0040_CD"));


Device D2(Mo, Promoter, RBS, CDS, Terminator, Mo);

Rule D2_1(ON D2: E WITH B);
Rule D2_3(ON D2: E BEFORE B);
Rule D2_4(ON D2: CONTAINS J23100_EB);

lstD2s = product(D2);
//pigeon(lstD2s);


/****************/
/*** DEVICE 3 ***/
/****************/

//Add. Parts for D3
Promoter pRhlR_FB(
	.Name("pRhlR_FB"), .Sequence("CGCTTCCTGTGAAATCTGGCAGTTACCGTTAGCTTTCGAATTGGCTAAAAAGTGTTCTACT"), .Description("R0071_FB"));
Promoter pBad_FB(
	.Name("pBad_FB"), .Sequence("CGCTACATTGATTATTTGCACGGCGTCACACTTTGCTATGCCATAGCATTTTTATCCATAAGATTAGCGGATCCTACCTGACGCTTTTTATCGCAACTCTCTACTGTTTCTCCATACCGTTTTTTTGGGCTAGCTACT"), .Description("I13453_FB"));
CDS RhlR_CD(
	.Name("RhlR_CD"), .Sequence("AATGATGAGGAATGACGGAGGCTTTTTGCTGTGGTGGGACGGTTTGCGTAGCGAGATGCAGCCGATCCACGACAGCCAGGGCGTGTTCGCCGTCCTGGAAAAGGAAGTGCGGCGCCTGGGCTTCGATTACTACGCCTATGGCGTGCGCCACACGATTCCCTTCACCCGGCCGAAGACCGAGGTCCATGGCACCTATCCCAAGGCCTGGCTGGAGCGATACCAGATGCAGAACTACGGGGCCGTGGATCCGGCGATCCTCAACGGCCTGCGCTCCTCGGAAATGGTGGTCTGGAGCGACAGCCTGTTCGACCAGAGCCGGATGCTCTGGAACGAGGCTCGCGATTGGGGCCTCTGTGTCGGCGCGACCTTGCCGATCCGCGCGCCGAACAATTTGCTCAGCGTGCTTTCCGTGGCGCGCGACCAGCAGAACATCTCCAGCTTCGAGCGCGAGGAAATCCGCCTGCGGCTGCGTTGCATGATCGAGTTGCTGACCCAGAAGCTGACCGACCTGGAGCATCCGATGCTGATGTCCAACCCGGTCTGCCTGAGCCATCGCGAACGCGAGATCCTGCAATGGACCGCCGACGGCAAGAGTTCCGGGGAAATCGCCATCATCCTGAGCATCTCCGAGAGCACGGTGAACTTCCACCACAAGAACATCCAGAAGAAGTTCGACGCGCCGAACAAGACGCTGGCTGCCGCCTACGCCGCGGCGCTGGGTCTCATCGCTGCAAACGACGAAAACTACGCTTTAGTAGCTTAATAAAGGT"), .Description("C0071_CD"));
Promoter pLacI_FB(
	.Name("pLacI_FB"), .Sequence("CGCTCAATACGCAAACCGCCTCTCCCCGCGCGTTGGCCGATTCATTAATGCAGCTGGCACGACAGGTTTCCCGACTGGAAAGCGGGCAGTGAGCGCAACGCAATTAATGTGAGTTAGCTCACTCATTAGGCACCCCAGGCTTTACACTTTATGCTTCCGGCTCGTATGTTGTGTGGAATTGTGAGCGGATAACAATTTCACACATACT"), .Description("R0010_FB"));
Promoter pLuxR_FB(
	.Name("pLuxR_FB"), .Sequence("CGCTACCTGTAGGATCGTACAGGTTTACGCAAGAAAATGGTTTGTTATAGTCGAATAAATACT"), .Description("R0062_FB"));
Promoter pTetR_FB(
	.Name("pTetR_FB"), .Sequence("CGCTTCCCTATCAGTGATAGAGATTGACATCCCTATCAGTGATAGAGATACTGAGCACTACT"), .Description("R0040_FB"));
CDS GFP_CD(
	.Name("GFP_CD"), .Sequence("AATGATGCGTAAAGGAGAAGAACTTTTCACTGGAGTTGTCCCAATTCTTGTTGAATTAGATGGTGATGTTAATGGGCACAAATTTTCTGTCAGTGGAGAGGGTGAAGGTGATGCAACATACGGAAAACTTACCCTTAAATTTATTTGCACTACTGGAAAACTACCTGTTCCATGGCCAACACTTGTCACTACTTTCGGTTATGGTGTTCAATGCTTTGCGAGATACCCAGATCATATGAAACAGCATGACTTTTTCAAGAGTGCCATGCCCGAAGGTTATGTACAGGAAAGAACTATATTTTTCAAAGATGACGGGAACTACAAGACACGTGCTGAAGTCAAGTTTGAAGGTGATACCCTTGTTAATAGAATCGAGTTAAAAGGTATTGATTTTAAAGAAGATGGAAACATTCTTGGACACAAATTGGAATACAACTATAACTCACACAATGTATACATCATGGCAGACAAACAAAAGAATGGAATCAAAGTTAACTTCAAAATTAGACACAACATTGAAGATGGAAGCGTTCAACTAGCAGACCATTATCAACAAAATACTCCAATTGGCGATGGCCCTGTCCTTTTACCAGACAACCATTACCTGTCCACACAATCTGCCCTTTCGAAAGATCCCAACGAAAAGAGAGACCACATGGTCCTTCTTGAGTTTGTAACAGCTGCTGGGATTACACATGGCATGGATGAACTATACAAATAATAATACT"), .Description("E0040_CD"));

// Molecules

Part SmallMolecule (Name); 
SmallMolecule aTc(.Name("aTc"));
aTc INDUCES TetR_CD;
	
SmallMolecule IPTG(.Name("IPTG"));
IPTG INDUCES LacI_CD;
	
SmallMolecule AHL(.Name("AHL"));
AHL INDUCES LuxR_CD;  	

SmallMolecule arabinose(.Name("arabinose"));
arabinose INDUCES araC_CD;

TetR_CD REPRESSES aTc;
aTc INDUCES pTetR_FB;

LacI_CD REPRESSES IPTG;
IPTG INDUCES pLacI_FB;

LuxR_CD REPRESSES AHL;
AHL INDUCES pLuxR_FB;
AHL INDUCES pRhlR_FB;

araC_CD REPRESSES arabinose;
arabinose INDUCES pBad_FB;


Device D3(SmallMolecule, Mo, Promoter, RBS, CDS, Terminator, Mo);

Rule D3_1(ON D3: F WITH G);
Rule D3_3(ON D3: F BEFORE G);
Rule D3_4(ON D3: CONTAINS GFP_CD);
Rule D3_5(ON D3: D3.SmallMolecule INDUCES D3.Promoter);

lstD3s = product(D3);
println(lstD3s);
pigeon(lstD3s);

/***
// RELATIONAL FACTS

 
***/



/*
 *   Ernst's updates
 */ 
/** 
// now, we build the cirucit
Device D (D1, D2, D3);

Rule D_1(
	ON D: 
		D1 CONTAINS RFP_CD); 
Rule D_2(
	ON D: 
		D2 CONTAINS J23100_EB);

Rule D_3(
	ON D:

		// MATCHING OF THE FUSION SITES
		// -- we could also extend the semantics of the MATCHES rule...
		D.D1[5] EQUALS D.D2[0]
			AND
		D.D2[5] EQUALS D.D3[1]
			AND
		D.D1[0] NOTEQUALS D.D1[5]
			AND
		D.D1[5] NOTEQUALS D.D2[5]
			AND
		D.D1[5] NOTEQUALS D.D3[6]
			AND
		D.D2[5] NOTEQUALS D.D3[6]
			AND
		D.D1[0] NOTEQUALS D.D3[6]
			AND
		D.D1[0] NOTEQUALS D.D2[5]
			AND 
		
		// ORDER OF THE FUSION SITES
		siteA BEFORE siteB
			AND
		siteB BEFORE siteC
			AND
		siteC BEFORE siteD	
			AND
		siteD BEFORE siteE	
			AND
		siteE BEFORE siteF	
			AND
		siteF BEFORE siteG
			
			AND

		// relationships
		// -- the cds (repressor) of D2 should repress the small molecule of D3
		D.D2.CDS REPRESSES D.D3.SmallMolecule
			AND			
		// -- the small molecule should induce the promoter of D3
		D.D3.SmallMolecule INDUCES D.D3.Promoter
);

lst = product(D, strict, 50);
//println(lst);
pigeon(lst);

***/









